plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '7.0.0'
}

allprojects {
    apply plugin: 'java'
    apply plugin: 'com.github.johnrengelman.shadow'
    group 'net.leonardo_dgs'
    version '2.0.0'
    description 'Create cool interactive books!'

    repositories {
        mavenCentral()
    }

    compileJava {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
        options.encoding = 'UTF-8'
    }

    tasks.shadowJar {
        archiveClassifier.set('')
    }

    tasks.jar.enabled = false
}

subprojects {
    if (it.name != 'Core') {
        dependencies {
            implementation project(path: ':Core', configuration: 'shadow')
        }
    }

    processResources {
        expand(
                version: rootProject.version,
                description: rootProject.description
        )
    }

    tasks.shadowJar {
        archiveBaseName.set(rootProject.name + '-' + project.name)
    }
}

dependencies {
    implementation project(path: ':Bukkit', configuration: 'shadow')
}

tasks.shadowJar {
    archiveBaseName.set(project.name)
}

artifacts {
    archives shadowJar
}
